# 🧠 ENCODER-AND-DECODER

**The BigInt + TOTP Encoder and Decoder** is a web-based tool built in **HTML** and **JavaScript** that allows users to encode and decode **text and images** securely using encryption based on large integers (**BigInt**) and **time-based authentication (TOTP – Time-Based One-Time Password)**.

---

## 🧩 General Functioning

The system has **four sections**:

### 🔤 Text Encoder
Transforms text into an encrypted number (`mixedBigInt` in hexadecimal) and generates a secret key (`TOTP Secret` in base32).

### 🔍 Text Decoder
Reconstructs the original text using the `mixedBigInt`, the `TOTP Secret`, and a one-time code generated by an authenticator app (e.g., **Google Authenticator**).

### 🖼️ Image Encoder
Compresses and encodes images automatically to approximately **30 pages (~90KB)** of hexadecimal text.  
Accepts multiple formats: **JPG, PNG, GIF, BMP, WEBP, SVG, TIFF, AVIF**, and others.  
All images are converted to **JPEG** during compression.

### 🧾 Image Decoder
Reconstructs the original image using the `mixedBigInt`, the `TOTP Secret`, and a valid TOTP code.

---

## 🔒 Main Technical Steps

1. The text or image (as base64) is converted into **bytes** and then into a very large integer (**BigInt**).  
2. A **random secret (20 bytes)** is created and converted into **Base32**, forming the **TOTP Secret**.  
3. From this secret, the system derives a **unique prime number** used to mix with the original value — the result is the **mixedBigInt** (encoded data).  
4. For images: automatic compression resizes to a maximum of **1200px** and adjusts **JPEG quality dynamically** to reach ~90KB, ensuring approximately 30 pages of hexadecimal output.  
5. To decode, the user needs the `mixedBigInt`, the `TOTP Secret`, and a **valid TOTP code** (generated every 30 seconds).  
6. The system validates the TOTP code and, if correct, divides the `mixedBigInt` by the derived prime to recover the original **text or image**.

---

## ⚙️ Main Technologies Used

- **Modern JavaScript (ES6+)**  
- **Web Crypto API** — for generating HMAC-SHA1 and SHA-256  
- **BigInt** — for performing operations with extremely large numbers  
- **Base32** — for compatibility with authenticator apps  
- **Canvas API** — for image compression and format conversion  

---

## 🖼️ Image Compression Details

| Feature | Description |
|----------|-------------|
| **Supported formats** | JPG, PNG, GIF, BMP, WEBP, SVG, TIFF, AVIF, and others |
| **Automatic resizing** | Maximum dimension of 1200px (maintains aspect ratio) |
| **Dynamic quality** | JPEG quality is automatically adjusted to reach ~90KB |
| **Output format** | All images are converted to JPEG |
| **Result** | Approximately 30 pages of hexadecimal text instead of 130+ pages for a 321KB image |

---

## 💡 Purpose

The goal of this code is to **secure textual data and images** without transmitting or storing the original secret.  
It combines **mathematical encoding** and **two-factor authentication (2FA)**, ensuring that only users who possess both the **TOTP secret** and a **valid code** can decrypt the content.

---


## 🔐 Encode text and image, and then decode use the website at:

👉 [https://k10.netlify.app/projetos/text&imagenscodigo](https://k10.netlify.app/projetos/text&imagenscodigo)

👉 [https://doi.org/10.5281/zenodo.17298224](https://doi.org/10.5281/zenodo.17298224)

---

## 🧩 STEPS

1. Enter the **mixedBigInt (hex)** value into the decoder on the website.  
2. Enter the **TOTP Secret (base32)** and input the required characters.  
3. Register the **TOTP Secret (base32)** characters in your **Authenticator app**.  

---

### ✅ Additions and Enhancements

- Inclusion of **image encoding** in the system description  
- Details about **supported formats** (JPG, PNG, GIF, BMP, WEBP, SVG, TIFF, AVIF)  
- Explanation of **automatic compression** to ~30 pages  
- Mention of **JPEG conversion** during compression  
- Technical notes on the **Canvas API**  
- Comparison of **file size reduction** (321KB → 90KB)
